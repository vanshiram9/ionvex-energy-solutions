<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dealer Registration | Ionvex Energy Solutions</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Request dealership with Ionvex Energy Solutions" />

  <!-- GLOBAL CSS -->
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="/css/auth.css" />
</head>
<body>

  <!-- ================= HEADER ================= -->
  <header class="main-header">
    <div class="logo">
      <img src="/assets/images/logo.png" alt="Ionvex Energy" />
      <span>Ionvex Energy</span>
    </div>

    <nav class="main-nav">
      <a href="/public/index.html">Home</a>
      <a href="/public/products.html">Products</a>
      <a href="/public/warranty.html">Warranty</a>
      <a href="/public/login.html">Login</a>
    </nav>
  </header>

  <!-- ================= REGISTRATION ================= -->
  <section class="auth-container">

    <h1>Dealer Registration Request</h1>
    <p>Submit details — Admin approval required</p>

    <div class="auth-box">

      <input type="text" id="dealerName" placeholder="Dealer / Business Name" />
      <input type="text" id="ownerName" placeholder="Owner Name" />
      <input type="email" id="email" placeholder="Email Address" />
      <input type="tel" id="phone" placeholder="Mobile Number" />
      <input type="text" id="city" placeholder="City" />
      <input type="text" id="state" placeholder="State" />
      <input type="text" id="gst" placeholder="GST Number (optional)" />

      <button id="submitBtn" class="btn-primary">
        Submit Request
      </button>

      <div id="successBox" class="success-box hidden"></div>
      <div id="errorBox" class="error-box hidden"></div>

      <div class="auth-links">
        <a href="/public/login.html">
          Already registered? Login
        </a>
      </div>

    </div>
  </section>

  <!-- ================= FOOTER ================= -->
  <footer class="main-footer">
    <p>© <span id="year"></span> Ionvex Energy Solutions</p>
  </footer>

  <!-- ================= JS ================= -->
  <script type="module">
    import { db, serverTimestamp } from "/js/firebase/firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    document.getElementById("year").textContent = new Date().getFullYear();

    const submitBtn = document.getElementById("submitBtn");
    const successBox = document.getElementById("successBox");
    const errorBox = document.getElementById("errorBox");

    submitBtn.addEventListener("click", async () => {

      const data = {
        dealerName: dealerName.value.trim(),
        ownerName: ownerName.value.trim(),
        email: email.value.trim(),
        phone: phone.value.trim(),
        city: city.value.trim(),
        state: state.value.trim(),
        gst: gst.value.trim(),
        status: "PENDING",
        createdAt: serverTimestamp()
      };

      successBox.classList.add("hidden");
      errorBox.classList.add("hidden");

      if (!data.dealerName || !data.ownerName || !data.email || !data.phone) {
        errorBox.textContent = "Please fill all required fields";
        errorBox.class
